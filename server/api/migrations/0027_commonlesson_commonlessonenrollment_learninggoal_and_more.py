# Generated by Django 4.2.24 on 2025-11-25 12:58

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('api', '0026_video_engagements'),
    ]

    operations = [
        migrations.CreateModel(
            name='CommonLesson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('slug', models.SlugField(unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('category', models.CharField(choices=[('grammar', 'Grammar'), ('vocabulary', 'Vocabulary'), ('pronunciation', 'Pronunciation'), ('conversation', 'Conversation'), ('business', 'Business English'), ('culture', 'Cultural Context'), ('idioms', 'Idioms & Expressions')], max_length=20)),
                ('difficulty', models.CharField(choices=[('beginner', 'Beginner'), ('intermediate', 'Intermediate'), ('advanced', 'Advanced')], default='beginner', max_length=20)),
                ('duration_minutes', models.IntegerField(default=15)),
                ('points_reward', models.IntegerField(default=50)),
                ('content', models.JSONField(default=dict)),
                ('thumbnail', models.ImageField(blank=True, null=True, upload_to='common_lesson_thumbnails/')),
                ('is_active', models.BooleanField(default=True)),
                ('order', models.IntegerField(default=0)),
                ('views', models.IntegerField(default=0)),
                ('completion_count', models.IntegerField(default=0)),
                ('average_score', models.FloatField(default=0.0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Common Lesson',
                'verbose_name_plural': 'Common Lessons',
                'ordering': ['order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CommonLessonEnrollment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enrolled_at', models.DateTimeField(auto_now_add=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('completed', models.BooleanField(default=False)),
                ('progress_percentage', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('score', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('time_spent_minutes', models.IntegerField(default=0)),
                ('attempts', models.IntegerField(default=0)),
                ('details', models.JSONField(default=dict)),
                ('last_accessed', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Common Lesson Enrollment',
                'verbose_name_plural': 'Common Lesson Enrollments',
            },
        ),
        migrations.CreateModel(
            name='LearningGoal',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('goal_type', models.CharField(choices=[('daily_practice', 'Daily Practice Time'), ('weekly_lessons', 'Weekly Lessons Completed'), ('vocabulary', 'Vocabulary Words Learned'), ('streak', 'Learning Streak'), ('score', 'Average Score Target'), ('custom', 'Custom Goal')], max_length=50)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('target_value', models.IntegerField()),
                ('current_value', models.IntegerField(default=0)),
                ('unit', models.CharField(default='', max_length=50)),
                ('start_date', models.DateField()),
                ('target_date', models.DateField()),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('completed', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Learning Goal',
                'verbose_name_plural': 'Learning Goals',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MicrolearningModule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('slug', models.SlugField(unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('category', models.CharField(choices=[('quick_tip', 'Quick Tip'), ('vocabulary_boost', 'Vocabulary Boost'), ('grammar_refresher', 'Grammar Refresher'), ('pronunciation_tip', 'Pronunciation Tip'), ('idiom_of_day', 'Idiom of the Day'), ('business_phrase', 'Business Phrase')], max_length=50)),
                ('difficulty', models.CharField(choices=[('beginner', 'Beginner'), ('intermediate', 'Intermediate'), ('advanced', 'Advanced')], default='beginner', max_length=20)),
                ('content', models.JSONField(default=dict)),
                ('duration_minutes', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(15)])),
                ('points_reward', models.IntegerField(default=25)),
                ('is_active', models.BooleanField(default=True)),
                ('is_featured', models.BooleanField(default=False)),
                ('order', models.IntegerField(default=0)),
                ('views', models.IntegerField(default=0)),
                ('completion_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Microlearning Module',
                'verbose_name_plural': 'Microlearning Modules',
                'ordering': ['-is_featured', 'order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WeeklyChallenge',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('challenge_id', models.CharField(max_length=100, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('category', models.CharField(max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('points_reward', models.IntegerField(default=100)),
                ('badge_icon', models.CharField(blank=True, max_length=50)),
                ('requirement_type', models.CharField(max_length=50)),
                ('requirement_value', models.IntegerField()),
                ('requirement_description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Weekly Challenge',
                'verbose_name_plural': 'Weekly Challenges',
                'ordering': ['-start_date'],
                'indexes': [models.Index(fields=['start_date', 'end_date', 'is_active'], name='api_weeklyc_start_d_b45743_idx'), models.Index(fields=['challenge_id'], name='api_weeklyc_challen_600629_idx')],
            },
        ),
        migrations.CreateModel(
            name='UserWeeklyChallenge',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enrolled_at', models.DateTimeField(auto_now_add=True)),
                ('started_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('completed', models.BooleanField(default=False)),
                ('current_progress', models.IntegerField(default=0)),
                ('progress_percentage', models.FloatField(default=0.0)),
                ('points_earned', models.IntegerField(default=0)),
                ('details', models.JSONField(default=dict)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('challenge', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_participations', to='api.weeklychallenge')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='weekly_challenges', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'User Weekly Challenge',
                'verbose_name_plural': 'User Weekly Challenges',
            },
        ),
        migrations.CreateModel(
            name='SpacedRepetitionItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('item_type', models.CharField(max_length=50)),
                ('item_id', models.CharField(max_length=255)),
                ('item_content', models.CharField(max_length=500)),
                ('ease_factor', models.FloatField(default=2.5)),
                ('interval_days', models.IntegerField(default=1)),
                ('repetitions', models.IntegerField(default=0)),
                ('next_review_date', models.DateField()),
                ('times_reviewed', models.IntegerField(default=0)),
                ('times_correct', models.IntegerField(default=0)),
                ('times_incorrect', models.IntegerField(default=0)),
                ('last_reviewed', models.DateTimeField(blank=True, null=True)),
                ('mastery_level', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='spaced_repetition_items', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Spaced Repetition Item',
                'verbose_name_plural': 'Spaced Repetition Items',
            },
        ),
        migrations.CreateModel(
            name='ProgressAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('young_kids', 'Young Kids (4-10)'), ('teen_kids', 'Teen Kids (11-17)'), ('adults_beginner', 'Adults Beginner'), ('adults_intermediate', 'Adults Intermediate'), ('adults_advanced', 'Adults Advanced'), ('ielts_pte', 'IELTS/PTE')], max_length=50)),
                ('period_start', models.DateField()),
                ('period_end', models.DateField()),
                ('period_type', models.CharField(default='weekly', max_length=20)),
                ('lessons_completed', models.IntegerField(default=0)),
                ('practice_time_minutes', models.IntegerField(default=0)),
                ('average_score', models.FloatField(default=0.0)),
                ('vocabulary_learned', models.IntegerField(default=0)),
                ('pronunciation_attempts', models.IntegerField(default=0)),
                ('streak_days', models.IntegerField(default=0)),
                ('points_earned', models.IntegerField(default=0)),
                ('improvement_percentage', models.FloatField(default=0.0)),
                ('consistency_score', models.FloatField(default=0.0)),
                ('insights', models.JSONField(default=dict)),
                ('recommendations', models.JSONField(default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='progress_analytics', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Progress Analytics',
                'verbose_name_plural': 'Progress Analytics',
            },
        ),
        migrations.CreateModel(
            name='PersonalizedRecommendation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('recommendation_type', models.CharField(choices=[('lesson', 'Lesson Recommendation'), ('practice', 'Practice Session'), ('video', 'Video Lesson'), ('challenge', 'Challenge'), ('review', 'Review Material'), ('path', 'Learning Path')], max_length=50)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('priority', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('target_id', models.CharField(blank=True, max_length=255)),
                ('target_type', models.CharField(blank=True, max_length=50)),
                ('action_url', models.CharField(blank=True, max_length=500)),
                ('reason', models.TextField(blank=True, help_text='Why this recommendation was made')),
                ('confidence_score', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(1)])),
                ('viewed', models.BooleanField(default=False)),
                ('viewed_at', models.DateTimeField(blank=True, null=True)),
                ('accepted', models.BooleanField(default=False)),
                ('accepted_at', models.DateTimeField(blank=True, null=True)),
                ('dismissed', models.BooleanField(default=False)),
                ('dismissed_at', models.DateTimeField(blank=True, null=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='personalized_recommendations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Personalized Recommendation',
                'verbose_name_plural': 'Personalized Recommendations',
                'ordering': ['-priority', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MicrolearningProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('completed', models.BooleanField(default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('score', models.FloatField(default=0.0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('time_spent_minutes', models.IntegerField(default=0)),
                ('attempts', models.IntegerField(default=0)),
                ('last_accessed', models.DateTimeField(auto_now=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_progress', to='api.microlearningmodule')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='microlearning_progress', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Microlearning Progress',
                'verbose_name_plural': 'Microlearning Progress',
            },
        ),
        migrations.AddIndex(
            model_name='microlearningmodule',
            index=models.Index(fields=['category', 'is_active'], name='api_microle_categor_ff81e8_idx'),
        ),
        migrations.AddIndex(
            model_name='microlearningmodule',
            index=models.Index(fields=['is_featured', 'is_active'], name='api_microle_is_feat_a265d3_idx'),
        ),
        migrations.AddField(
            model_name='learninggoal',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='learning_goals', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='commonlessonenrollment',
            name='lesson',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='api.commonlesson'),
        ),
        migrations.AddField(
            model_name='commonlessonenrollment',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='common_lesson_enrollments', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddIndex(
            model_name='commonlesson',
            index=models.Index(fields=['category', 'is_active'], name='api_commonl_categor_de5e32_idx'),
        ),
        migrations.AddIndex(
            model_name='commonlesson',
            index=models.Index(fields=['difficulty', 'is_active'], name='api_commonl_difficu_d38972_idx'),
        ),
        migrations.AddIndex(
            model_name='userweeklychallenge',
            index=models.Index(fields=['user', 'completed'], name='api_userwee_user_id_a6e3b2_idx'),
        ),
        migrations.AddIndex(
            model_name='userweeklychallenge',
            index=models.Index(fields=['challenge', 'completed'], name='api_userwee_challen_5098fa_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='userweeklychallenge',
            unique_together={('user', 'challenge')},
        ),
        migrations.AddIndex(
            model_name='spacedrepetitionitem',
            index=models.Index(fields=['user', 'next_review_date'], name='api_spacedr_user_id_2328cc_idx'),
        ),
        migrations.AddIndex(
            model_name='spacedrepetitionitem',
            index=models.Index(fields=['user', 'item_type'], name='api_spacedr_user_id_3aa640_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='spacedrepetitionitem',
            unique_together={('user', 'item_type', 'item_id')},
        ),
        migrations.AddIndex(
            model_name='progressanalytics',
            index=models.Index(fields=['user', 'category', 'period_start'], name='api_progres_user_id_719aba_idx'),
        ),
        migrations.AddIndex(
            model_name='progressanalytics',
            index=models.Index(fields=['user', 'period_type'], name='api_progres_user_id_9fa374_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='progressanalytics',
            unique_together={('user', 'category', 'period_start', 'period_end', 'period_type')},
        ),
        migrations.AddIndex(
            model_name='personalizedrecommendation',
            index=models.Index(fields=['user', 'viewed', 'dismissed'], name='api_persona_user_id_e35e96_idx'),
        ),
        migrations.AddIndex(
            model_name='personalizedrecommendation',
            index=models.Index(fields=['user', 'recommendation_type'], name='api_persona_user_id_eb41ec_idx'),
        ),
        migrations.AddIndex(
            model_name='personalizedrecommendation',
            index=models.Index(fields=['expires_at'], name='api_persona_expires_951390_idx'),
        ),
        migrations.AddIndex(
            model_name='microlearningprogress',
            index=models.Index(fields=['user', 'completed'], name='api_microle_user_id_c598a3_idx'),
        ),
        migrations.AddIndex(
            model_name='microlearningprogress',
            index=models.Index(fields=['module', 'completed'], name='api_microle_module__73b747_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='microlearningprogress',
            unique_together={('user', 'module')},
        ),
        migrations.AddIndex(
            model_name='learninggoal',
            index=models.Index(fields=['user', 'is_active', 'completed'], name='api_learnin_user_id_63059a_idx'),
        ),
        migrations.AddIndex(
            model_name='learninggoal',
            index=models.Index(fields=['user', 'target_date'], name='api_learnin_user_id_d0651a_idx'),
        ),
        migrations.AddIndex(
            model_name='commonlessonenrollment',
            index=models.Index(fields=['user', 'completed'], name='api_commonl_user_id_cf0815_idx'),
        ),
        migrations.AddIndex(
            model_name='commonlessonenrollment',
            index=models.Index(fields=['user', 'enrolled_at'], name='api_commonl_user_id_9a175c_idx'),
        ),
        migrations.AddIndex(
            model_name='commonlessonenrollment',
            index=models.Index(fields=['lesson', 'completed'], name='api_commonl_lesson__391d82_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='commonlessonenrollment',
            unique_together={('user', 'lesson')},
        ),
    ]
